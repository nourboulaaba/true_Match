<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.paint.Color?>
<?import javafx.scene.paint.LinearGradient?>
<?import javafx.scene.paint.Stop?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0" style="-fx-background-color: transparent;" stylesheets="@../styles.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="tn.esprit.pitest11.Controller.gestUser.Login">
    <children>
        <AnchorPane onMouseDragged="#screenDragged" onMousePressed="#screenPressed" prefHeight="700.0" prefWidth="1000.0" style="-fx-background-color: #ffffff; -fx-background-radius: 20;">
            <!-- Panneau d'informations (Sign In / Sign Up) -->
            <Pane fx:id="InformationPane" layoutX="500.0" prefHeight="700.0" prefWidth="500.0">
                <!-- Formulaire d'inscription -->
                <VBox fx:id="SignUpInformation" alignment="CENTER" fillWidth="false" prefHeight="700.0" prefWidth="500.0">
                    <children>
                        <HBox alignment="CENTER" prefHeight="69.0" prefWidth="353.0" spacing="40.0">
                            <children>
                                <Label text="CREER UN COMPTE">
                                    <font>
                                        <Font name="Montserrat ExtraBold" size="40.0" />
                                    </font>
                                </Label>
                            </children>
                        </HBox>

                        <!-- Last Name Field -->
                        <TextField fx:id="lastName" prefHeight="31.0" prefWidth="301.0" promptText="Nom" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </TextField>
                        <Label fx:id="errorLastName" style="-fx-text-fill: red; -fx-font-size: 12;" text="" visible="false">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                        </Label>

                        <!-- First Name Field -->
                        <TextField fx:id="firstName" prefHeight="31.0" prefWidth="301.0" promptText="Prénom" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </TextField>
                        <Label fx:id="errorFirstName" style="-fx-text-fill: red; -fx-font-size: 12;" text="" visible="false">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                        </Label>

                        <!-- Email Field -->
                        <TextField fx:id="email" prefHeight="31.0" prefWidth="301.0" promptText="Email" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </TextField>
                        <Label fx:id="errorEmail" style="-fx-text-fill: red; -fx-font-size: 12;" text="" visible="false">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                        </Label>

                        <!-- Phone Number Field -->
                        <TextField fx:id="phoneNumber" prefHeight="31.0" prefWidth="301.0" promptText="Téléphone" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </TextField>
                        <Label fx:id="errorPhone" style="-fx-text-fill: red; -fx-font-size: 12;" text="" visible="false">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                        </Label>

                        <!-- Password Field -->
                        <PasswordField fx:id="password" prefHeight="30.0" prefWidth="300.0" promptText="Mot de passe" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </PasswordField>
                        <Label fx:id="errorPassword" style="-fx-text-fill: red; -fx-font-size: 12;" text="" visible="false">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                        </Label>

                        <!-- Confirm Password Field -->
                        <PasswordField fx:id="confirmPassword" prefHeight="30.0" prefWidth="300.0" promptText="Confirmer mot de passe" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </PasswordField>
                        <Label fx:id="errorConfirmPassword" style="-fx-text-fill: red; -fx-font-size: 12;" text="" visible="false">
                            <VBox.margin>
                                <Insets top="5.0" />
                            </VBox.margin>
                        </Label>
                  <Button mnemonicParsing="false" onAction="#handleFaceId" text="faceid" />

                        <!-- Register Button -->
                        <Button onAction="#registerUser" prefHeight="43.0" prefWidth="170.0" style="-fx-background-color: #699BF7; -fx-text-fill: #FFFFFF;" text="S'INSCRIRE">
                            <opaqueInsets>
                                <Insets />
                            </opaqueInsets>
                            <cursor>
                                <Cursor fx:constant="HAND" />
                            </cursor>
                            <VBox.margin>
                                <Insets top="45.0" />
                            </VBox.margin>
                        </Button>
                    </children>
                </VBox>

                <!-- Formulaire de connexion -->
                <VBox fx:id="SignInInformation" alignment="CENTER" fillWidth="false" prefHeight="700.0" prefWidth="500.0" visible="false">
                    <children>
                        <Label text="Se connecter">
                            <font>
                                <Font name="Montserrat ExtraBold" size="50.0" />
                            </font>
                        </Label>
                        <HBox alignment="CENTER" prefHeight="69.0" prefWidth="353.0" spacing="40.0">
                        </HBox>

                        <!-- Username Field -->
                        <TextField fx:id="usernameField" prefHeight="30.0" prefWidth="300.0" promptText="Email" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </TextField>

                        <!-- Password Field -->
                        <PasswordField fx:id="passwordField" prefHeight="30.0" prefWidth="300.0" promptText="Mot de passe" style="-fx-focus-color: #699BF7;">
                            <VBox.margin>
                                <Insets top="25.0" />
                            </VBox.margin>
                        </PasswordField>

                        <!-- Forgot Password Link -->
                        <Label onMouseClicked="#forgotPassword" styleClass="labelForget" text="Mot de passe oublié ?">
                            <VBox.margin>
                                <Insets top="45.0" />
                            </VBox.margin>
                            <font>
                                <Font name="Montserrat Regular" size="15.0" />
                            </font>
                        </Label>

                        <!-- Login Button -->
                        <Button fx:id="loginButton" onAction="#login" prefHeight="43.0" prefWidth="170.0" style="-fx-background-color: #699BF7; -fx-text-fill: #FFFFFF;" text="SE CONNECTER" />
                        <Button fx:id="loginButtonFace" onAction="#handleFaceIdLogin" prefHeight="43.0" prefWidth="170.0" style="-fx-background-color: #699BF7; -fx-text-fill: #FFFFFF;" text="Face Id">

                        <opaqueInsets>
                                <Insets />
                            </opaqueInsets>
                            <cursor>
                                <Cursor fx:constant="HAND" />
                            </cursor>
                            <VBox.margin>
                                <Insets top="35.0" />
                            </VBox.margin>
                        </Button>

                        <Button onAction="#GoogleLoginButton" style="-fx-background-color: transparent; -fx-border-color: #699BF7; -fx-border-radius: 5;">
                            <graphic>
                                <HBox alignment="CENTER" spacing="10.0">
                                    <ImageView fx:id="googleLoginButton" fitHeight="30.0" fitWidth="30.0" pickOnBounds="true" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/google-icon.png" />
                                        </image>
                                    </ImageView>
                                    <Label style="-fx-text-fill: #699BF7; -fx-font-size: 14;" text="Se connecter avec Google" />
                                </HBox>
                            </graphic>
                            <cursor>
                                <Cursor fx:constant="HAND" />
                            </cursor>
                            <VBox.margin>
                                <Insets top="20.0" />
                            </VBox.margin>
                        </Button>


                        <Button style="-fx-background-color: transparent; -fx-border-color: #699BF7; -fx-border-radius: 5;">
                            <graphic>
                                <HBox alignment="CENTER" spacing="10.0">
                                    <ImageView fitHeight="30.0" fitWidth="30.0" pickOnBounds="true" preserveRatio="true">
                                        <image>
                                            <Image url="@../images/linkedin-icon.png" />
                                        </image>
                                    </ImageView>
                                    <Label style="-fx-text-fill: #699BF7; -fx-font-size: 14;" text="Se connecter avec LinkedIn" />
                                </HBox>
                            </graphic>
                            <cursor>
                                <Cursor fx:constant="HAND" />
                            </cursor>
                            <VBox.margin>
                                <Insets top="10.0" />
                            </VBox.margin>
                        </Button>

                    </children>
                </VBox>
            </Pane>

            <!-- Panneau de couleur avec dégradé -->
            <Pane fx:id="ColorPane" prefHeight="700.0" prefWidth="500.0" style="-fx-background-color: linear-gradient(to right, #699BF7, #4A7FC7); -fx-background-radius: 20 0 0 20;">
                <effect>
                    <DropShadow blurType="GAUSSIAN" color="#363636" height="27.99" offsetX="8.0" radius="20.4925" width="55.98" />
                </effect>
            </Pane>

            <!-- Section pour basculer vers l'inscription -->
            <VBox fx:id="SIGNIN" alignment="CENTER" prefHeight="700.0" prefWidth="500.0">
                <children>
                    <Label text="TRUE MATCH" textFill="WHITE">
                        <font>
                            <Font name="Montserrat ExtraBold" size="50.0" />
                        </font>
                    </Label>
                    <Label alignment="CENTER" contentDisplay="CENTER" prefHeight="116.0" prefWidth="461.0" text="Restez connecté avec nous en utilisant vos informations personnelles" textAlignment="CENTER" wrapText="true">
                        <font>
                            <Font name="Montserrat Regular" size="22.0" />
                        </font>
                        <textFill>
                            <LinearGradient endX="1.0" endY="1.0">
                                <stops>
                                    <Stop>
                                        <color>
                                            <Color red="0.42358675599098206" green="0.4728330075740814" blue="0.557894766330719" />
                                        </color>
                                    </Stop>
                                    <Stop offset="1.0">
                                        <color>
                                            <Color red="1.0" green="1.0" blue="1.0" />
                                        </color>
                                    </Stop>
                                </stops>
                            </LinearGradient>
                        </textFill>
                    </Label>

                    <Button onAction="#SignIn" prefHeight="43.0" prefWidth="170.0" style="-fx-background-color: #4A7FC7; -fx-text-fill: #FFFFFF;" text="SE CONNECTER">
                        <opaqueInsets>
                            <Insets />
                        </opaqueInsets>
                        <cursor>
                            <Cursor fx:constant="HAND" />
                        </cursor>
                    </Button>
                </children>
            </VBox>

            <!-- Section pour basculer vers la connexion -->
            <VBox fx:id="SIGNUP" alignment="CENTER" layoutX="500.0" prefHeight="700.0" prefWidth="500.0" visible="false">
                <children>
                    <Label text="TRUE MATCH" textFill="WHITE">
                        <font>
                            <Font name="Montserrat ExtraBold" size="50.0" />
                        </font>
                    </Label>
                    <Label prefHeight="116.0" prefWidth="461.0" text=" " textAlignment="CENTER" textFill="WHITE" wrapText="true">
                        <font>
                            <Font name="Montserrat Regular" size="22.0" />
                        </font>
                    </Label>
                    <Button fx:id="signUpButton" onAction="#SignUP" prefHeight="43.0" prefWidth="170.0" style="-fx-background-color: #4A7FC7; -fx-text-fill: #FFFFFF;" text="S'INSCRIRE">
                        <opaqueInsets>
                            <Insets />
                        </opaqueInsets>
                        <cursor>
                            <Cursor fx:constant="HAND" />
                        </cursor>
                    </Button>
                </children>
            </VBox>
        </AnchorPane>

        <!-- Boutons de contrôle (fermer, réduire) -->
        <HBox alignment="CENTER" layoutX="14.0" prefHeight="43.0" prefWidth="8.0" spacing="5.0">
            <children>
                <Button fx:id="minusBtn" alignment="CENTER" layoutX="1.0" layoutY="1.0" onAction="#minus" prefHeight="2.0" prefWidth="2.0" styleClass="topButton" text=" ">
                    <font>
                        <Font size="5.0" />
                    </font>
                </Button>
                <Button fx:id="closeBtn" alignment="CENTER" onAction="#close" prefHeight="25.0" prefWidth="25.0" styleClass="topButton" text=" ">
                    <font>
                        <Font size="1.0" />
                    </font>
                </Button>
            </children>
        </HBox>
    </children>
</AnchorPane>
